name: Update README

on:
  release:
    types: [created]

jobs:
  update_readme:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
        with:
          ref: master
          repository: freek-organization/.github
          path: .github
      - name: Install Octokit Package
        run: npm install @octokit/rest

      - name: Trigger Another Github Action
        uses: actions/github-script@1.0.0
        with:
          script: |
            const octokit = require("@octokit/rest")()
            octokit.repos.createDispatchEvent({
              owner: "freek-organization",
              repo: ".github",
              event_type: "update_readme",
              client_payload: {
                repo_name: "${{ github.repository }}",
                tag: "${{ github.ref }}"
              }
            })
